import{store as t}from"/components/chat/input/input-store.min.js";import{store as e}from"/components/modals/history/history-store.min.js";import{store as o}from"/components/modals/context/context-store.min.js";const n={"ctrl+space":{handler:()=>{t&&"function"==typeof t.pauseAgent&&t.pauseAgent(!t.paused)},description:"Pause/Resume Agent"},"ctrl+k":{handler:()=>{t&&"function"==typeof t.loadKnowledge&&t.loadKnowledge()},description:"Import Knowledge"},"ctrl+o":{handler:()=>{t&&"function"==typeof t.browseFiles&&t.browseFiles()},description:"Browse Files"},"ctrl+h":{handler:()=>{e&&"function"==typeof e.open&&e.open()},description:"Open History"},"ctrl+shift+c":{handler:()=>{o&&"function"==typeof o.open&&o.open()},description:"Open Context"},"ctrl+n":{handler:()=>{t&&"function"==typeof t.nudge&&t.nudge()},description:"Send Nudge"},"?":{handler:()=>{const t=globalThis.Alpine?.store("keyboardShortcuts");t&&"function"==typeof t.open&&t.open()},description:"Show Keyboard Shortcuts"}};function r(t){if(function(t){if(!t)return!1;const e=t.tagName.toLowerCase();if(["input","textarea","select"].includes(e))return!0;if(t.isContentEditable)return!0;const o=t.getAttribute("role");return!(!o||!["textbox","searchbox","combobox"].includes(o))||!(!t.classList||!t.classList.contains("ace_editor"))}(t.target))return;const e=function(t){const e=[];t.ctrlKey&&e.push("ctrl"),t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),t.metaKey&&e.push("meta");let o=t.key.toLowerCase();return" "===o&&(o="space"),e.push(o),e.join("+")}(t),o=n[e];if(o){t.preventDefault(),t.stopPropagation();try{o.handler()}catch(t){console.error(`Error executing keyboard shortcut "${e}":`,t)}}}export function initKeyboardShortcuts(){document.addEventListener("keydown",r)}export function getRegisteredShortcuts(){return Object.entries(n).reduce((t,[e,o])=>(t[e]=o.description,t),{})}initKeyboardShortcuts();