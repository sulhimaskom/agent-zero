import{createStore}from"/js/AlpineStore.js";const model={isOpen:!0,_initialized:!1,sectionStates:{tasks:!1,preferences:!1},init(){this._initialized||(this._initialized=!0,this.loadSectionStates(),this.handleResize(),this.resizeHandler=()=>this.handleResize(),window.addEventListener("resize",this.resizeHandler))},loadSectionStates(){try{const e=localStorage.getItem("sidebarSections");e&&(this.sectionStates={...this.sectionStates,...JSON.parse(e)})}catch(e){console.error("Failed to load sidebar section states",e)}},persistSectionStates(){try{localStorage.setItem("sidebarSections",JSON.stringify(this.sectionStates))}catch(e){console.error("Failed to persist section states",e)}},isSectionOpen(e){return!0===this.sectionStates[e]},toggleSection(e){e in this.sectionStates&&(this.sectionStates[e]=!this.sectionStates[e],this.persistSectionStates())},destroy(){this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this._initialized=!1},toggle(){this.isOpen=!this.isOpen},close(){this.isMobile()&&(this.isOpen=!1)},handleResize(){this.isOpen=!this.isMobile()},isMobile:()=>window.innerWidth<=768};export const store=createStore("sidebar",model);