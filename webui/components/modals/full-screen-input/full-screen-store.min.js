import{createStore}from"/js/AlpineStore.min.js";import{LIMITS,TIMING}from"/js/constants.min.js";const model={isOpen:!1,inputText:"",wordWrap:!0,undoStack:[],redoStack:[],maxStackSize:LIMITS.MODAL_MAX_STACK_SIZE,lastSavedState:"",init(){},openModal(){const t=document.getElementById("chat-input");this.inputText=t?t.value:this.inputText,this.lastSavedState=this.inputText,this.isOpen=!0,this.undoStack=[],this.redoStack=[],setTimeout(()=>{const t=document.getElementById("full-screen-input");t&&t.focus()},TIMING.WELCOME_ANIMATION_DELAY)},handleClose(){const t=document.getElementById("chat-input");t&&(t.value=this.inputText,t.dispatchEvent(new Event("input"))),this.isOpen=!1},updateHistory(){this.lastSavedState!==this.inputText&&(this.undoStack.push(this.lastSavedState),this.undoStack.length>this.maxStackSize&&this.undoStack.shift(),this.redoStack=[],this.lastSavedState=this.inputText)},undo(){this.canUndo&&(this.redoStack.push(this.inputText),this.inputText=this.undoStack.pop(),this.lastSavedState=this.inputText)},redo(){this.canRedo&&(this.undoStack.push(this.inputText),this.inputText=this.redoStack.pop(),this.lastSavedState=this.inputText)},clearText(){this.inputText&&(this.updateHistory(),this.inputText="",this.lastSavedState="")},toggleWrap(){this.wordWrap=!this.wordWrap},get canUndo(){return this.undoStack.length>0},get canRedo(){return this.redoStack.length>0}};export const store=createStore("fullScreenInputModal",model);