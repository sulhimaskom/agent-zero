# Check Settings TODOs

Find all TODO comments in python/helpers/settings.py and create issues for them.

## TODOS TO TRACK

From settings.py (lines with TODOs):
- Line 1558: "TODO: this is overkill, replace with background task"
- Line 1616: "TODO: this is overkill, replace with background task"
- Line 1621: "TODO: this is ugly, token generation mismatch"
- Line 1631: "TODO: this is overkill, replace with background task"
- Line 1643: "TODO: this is overkill, replace with background task"

## ANALYSIS

**Problem:**
- settings.py has 5 TODOs about blocking operations that should be background tasks
- Current implementation blocks on settings operations that can be done asynchronously
- This impacts CI/CD performance and user experience

**Recommended Actions:**

1. **Extract Background Task Manager**
   - Create `python/helpers/settings_background.py`
   - Implement async settings loading, saving, conversion
   - Use asyncio or threading for non-blocking operations

2. **Split convert_out Function**
   - Break 1134-line function into smaller focused functions:
     - `load_provider_settings()`
     - `load_model_settings()`
     - `load_api_settings()`
   - Each function <100 lines

3. **Fix Token Generation Mismatch**
   - Line 1621: "token generation mismatch"
   - Ensure consistent token handling across all settings operations

## OUTPUT FORMAT

For each TODO, create an issue with:
- Title: "Refactor settings.py - Replace blocking operations with background tasks"
- Category: refactor
- Priority: P0
- Description:
  - settings.py has 5 TODOs about blocking operations (lines 1558, 1616, 1621, 1631, 1643)
  - These blocking operations impact performance
  - Extract background task manager to python/helpers/settings_background.py
  - Split convert_out function (1134 lines) into smaller functions
  - Fix token generation mismatch at line 1621

## ISSUE CREATION

```bash
# Create one comprehensive issue for all settings.py TODOs
gh issue create --title "Refactor settings.py - Replace blocking operations with background tasks" \
  --body "settings.py has 5 TODOs about blocking operations..." \
  --label "refactor" \
  --label "P0"
```
